(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[749],{2293:function(t,n,e){"use strict";e.d(n,{Z:function(){return b}});var r=e(3366),o=e(7462),i=e(7294),a=(e(5697),e(6010)),c=e(7192),s=e(1496),u=e(7623),l=e(8216),p=e(5113),f=e(8979);function d(t){return(0,f.Z)("MuiAppBar",t)}(0,e(6087).Z)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);var h=e(5893);const m=["className","color","enableColorOnDark","position"],g=(0,s.ZP)(p.Z,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:e}=t;return[n.root,n[`position${(0,l.Z)(e.position)}`],n[`color${(0,l.Z)(e.color)}`]]}})((({theme:t,ownerState:n})=>{const e="light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[900];return(0,o.Z)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:t.zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:t.zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:t.zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},"default"===n.color&&{backgroundColor:e,color:t.palette.getContrastText(e)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:t.palette[n.color].main,color:t.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===t.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,o.Z)({backgroundColor:"transparent",color:"inherit"},"dark"===t.palette.mode&&{backgroundImage:"none"}))}));var b=i.forwardRef((function(t,n){const e=(0,u.Z)({props:t,name:"MuiAppBar"}),{className:i,color:s="primary",enableColorOnDark:p=!1,position:f="fixed"}=e,b=(0,r.Z)(e,m),y=(0,o.Z)({},e,{color:s,position:f,enableColorOnDark:p}),x=(t=>{const{color:n,position:e,classes:r}=t,o={root:["root",`color${(0,l.Z)(n)}`,`position${(0,l.Z)(e)}`]};return(0,c.Z)(o,d,r)})(y);return(0,h.jsx)(g,(0,o.Z)({square:!0,component:"header",ownerState:y,elevation:4,className:(0,a.Z)(x.root,i,"fixed"===f&&"mui-fixed"),ref:n},b))}))},1077:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/credentials",function(){return e(3054)}])},3347:function(t,n,e){"use strict";e.d(n,{IU:function(){return r},x4:function(){return o},$8:function(){return i}});var r=function(t){return fetch("".concat("https://jbnpl-server.ue.r.appspot.com","/signup"),{method:"POST",headers:{Accept:'application/json"',"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},o=function(t){return fetch("".concat("https://jbnpl-server.ue.r.appspot.com","/login"),{method:"POST",headers:{Accept:'application/json"',"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},i=function(){var t=localStorage.getItem("jwt");return!!t&&JSON.parse(t)}},7607:function(t,n,e){"use strict";e.d(n,{S1:function(){return o},ke:function(){return i},LN:function(){return a},fF:function(){return c}});var r=e(3347),o=function(t){return fetch("".concat("https://jbnpl-server.ue.r.appspot.com","/mx/institution/").concat(t),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},i=function(t){return fetch("".concat("https://jbnpl-server.ue.r.appspot.com","/mx/institution/credentials/").concat(t.code),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},a=function(t){console.log(t);var n=(0,r.$8)().user._id;return fetch("".concat("https://jbnpl-server.ue.r.appspot.com","/mx/membership/").concat(n,"/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))},c=function(t,n){return fetch("".concat("https://jbnpl-server.ue.r.appspot.com","/users/").concat(t,"/members/").concat(n,"/aggregate"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))}},3054:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return S}});var r=e(5893),o=e(7294),i=e(1496),a=e(8239),c=e(1927),s=e(7357),u=e(2293),l=e(3347),p=e(5075);function f(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var d=function(t){var n=function(n){return(0,l.$8)()?(0,r.jsx)(t,function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))),r.forEach((function(n){f(t,n,e[n])}))}return t}({},n)):(0,r.jsx)(p.default,{})};return t.getInitialProps&&(n.getInitialProps=t.getInitialProps),n},h=e(1163),m=e(2008),g=e(3321),b=e(7607);function y(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function x(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(e.push(a.value),!n||e.length!==n);r=!0);}catch(s){o=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function j(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var v={credentialRequests:[]},w=(0,i.ZP)(u.Z,{shouldForwardProp:function(t){return"open"!==t}})((function(t){var n=t.theme,e=t.open;return function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))),r.forEach((function(n){y(t,n,e[n])}))}return t}({zIndex:n.zIndex.drawer+1,transition:n.transitions.create(["width","margin"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen})},e&&{transition:n.transitions.create(["width","margin"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.enteringScreen})})})),Z=(0,a.Z)();function O(t){var n,e=t.institution,i=(0,h.useRouter)();v.credentialRequests=e.credentials.map((function(t){return{guid:t.guid,value:""}}));var a=x(o.useState(v.credentialRequests),2),c=a[0],u=a[1],p=x(o.useState(""),2),f=(p[0],p[1],function(t){var n=t.target.id,e=t.target.value,r=c.findIndex((function(t){return t.guid==n}));c[r].value=e,u(j(c))});return(0,r.jsxs)(s.Z,{sx:{my:8,mx:4,display:"flex",flexDirection:"row",alignItems:"center"},children:[null===(n=e.credentials)||void 0===n?void 0:n.map((function(t){return(0,r.jsx)(m.Z,{id:t.guid,label:t.fieldName,variant:"outlined",onChange:f},t.fieldType)})),(0,r.jsx)(g.Z,{variant:"contained",onClick:function(){var t={userGuid:(0,l.$8)().user.mxId,institutionCode:e.code,credentials:c};(0,b.LN)(t).then((function(t){i.push("home")}))},children:"Submit"})]})}var S=d((function(){var t=(0,h.useRouter)(),n=JSON.parse(t.query.institution);return(0,r.jsx)(c.Z,{theme:Z,children:(0,r.jsxs)(s.Z,{sx:{display:"flex"},children:[(0,r.jsx)(w,{position:"absolute"}),(0,r.jsx)(s.Z,{display:"flex",width:500,height:80,bgcolor:"lightgreen",alignItems:"center",justifyContent:"center",children:(0,r.jsx)(O,{institution:n})})]})})}))},5075:function(t,n,e){"use strict";e.r(n);var r=e(5893),o=e(7294),i=e(1163),a=e(9661),c=e(3321),s=e(6720),u=e(2008),l=e(122),p=e(5113),f=e(7357),d=e(6886),h=e(5861),m=e(8239),g=e(1927),b=e(3347),y=e(461);function x(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function j(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(e.push(a.value),!n||e.length!==n);r=!0);}catch(s){o=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(t){return(0,r.jsxs)(h.Z,function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))),r.forEach((function(n){x(t,n,e[n])}))}return t}({variant:"body2",color:"text.secondary",align:"center"},t,{children:["Copyright \xa9 ",(0,r.jsx)(l.Z,{color:"inherit",href:"https://mui.com/",children:"BNPL"})," ",(new Date).getFullYear(),"."]}))}var w=(0,m.Z)();n.default=function(){var t=(0,i.useRouter)(),n=j(o.useState(""),2),e=(n[0],n[1]),m=j((0,y.Z)(["jwt"]),3),x=(m[0],m[1]);m[2];return(0,r.jsx)(g.Z,{theme:w,children:(0,r.jsxs)(d.ZP,{container:!0,component:"main",sx:{height:"100vh"},children:[(0,r.jsx)(s.ZP,{}),(0,r.jsx)(d.ZP,{item:!0,xs:!1,sm:4,md:7,sx:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:function(t){return"light"===t.palette.mode?t.palette.grey[50]:t.palette.grey[900]},backgroundSize:"cover",backgroundPosition:"center"}}),(0,r.jsx)(d.ZP,{item:!0,xs:12,sm:8,md:5,component:p.Z,elevation:6,square:!0,children:(0,r.jsxs)(f.Z,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)(a.Z,{sx:{m:1,bgcolor:"secondary.main"}}),(0,r.jsx)(h.Z,{component:"h1",variant:"h5",children:"Sign in"}),(0,r.jsxs)(f.Z,{component:"form",noValidate:!0,onSubmit:function(n){n.preventDefault();var r=new FormData(n.currentTarget),o=r.get("email"),i=r.get("password");(0,b.x4)({name:null,email:o,password:i}).then((function(n){n.error?e(n.error):(x("jwt",JSON.stringify(n),{path:"/",maxAge:3600,sameSite:!0}),t.push("/home"))}))},sx:{mt:1},children:[(0,r.jsx)(u.Z,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),(0,r.jsx)(u.Z,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),(0,r.jsx)(c.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),(0,r.jsx)(d.ZP,{container:!0,children:(0,r.jsx)(d.ZP,{item:!0,children:(0,r.jsx)(l.Z,{href:"/signup",variant:"body2",children:"Don't have an account? Sign Up"})})}),(0,r.jsx)(v,{sx:{mt:5}})]})]})})]})})}}},function(t){t.O(0,[75,31,582,774,888,179],(function(){return n=1077,t(t.s=n);var n}));var n=t.O();_N_E=n}]);